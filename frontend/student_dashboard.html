<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Praktiki â€” Student</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="card">
      <h2>Student Dashboard (Demo)</h2>
      <form id="internForm">
        <label>APAAR ID</label><input id="apaar_id" required />
        <label>Name</label><input id="student_name" required />
        <label>Institution Code</label><input id="institution_code" />
        <label>Organization</label><input id="organization" />
        <label>Start Date</label><input id="start_date" type="date" value="" />
        <label>End Date</label><input id="end_date" type="date" value="" />
        <label>Total Hours</label><input id="total_hours" type="number" value="200" />
        <label>Internship Text</label><textarea id="internship_text">Worked on cloud infra, CI/CD and monitoring.</textarea>
        <button>Submit Internship</button>
      </form>
      <div id="result" class="muted"></div>
    </div>
  </div>
<script>
document.getElementById('internForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const body = {
    apaar_id: document.getElementById('apaar_id').value,
    student_name: document.getElementById('student_name').value,
    institution_code: document.getElementById('institution_code').value,
    organization: document.getElementById('organization').value,
    start_date: document.getElementById('start_date').value || new Date().toISOString().slice(0,10),
    end_date: document.getElementById('end_date').value || new Date().toISOString().slice(0,10),
    total_hours: parseInt(document.getElementById('total_hours').value,10),
    internship_text: document.getElementById('internship_text').value
  };
  const res = await fetch('https://freelance-backend-y0el.onrender.com/submit_internship', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify(body)
  });
  if(!res.ok){ alert('Submit failed'); return; }
  const data = await res.json();
  document.getElementById('result').innerText = 'Submitted: ' + data.internship_id + ' (status: ' + data.status + ')';
});
</script>
</body>
</html>
